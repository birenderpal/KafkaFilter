{% extends "base.html" %}
{% block head %}
<script type="text/javascript">
    $(document).ready(function () {
        $('#search-container').keyup(function(){
            var searchField = $('#search-container').val();

        })

    })
    function getIndicatorDetails(type) {
        $.getJSON('/' + type + '/indicatordetails', function (data) {
            var output = `<table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" style="width: 1080px;">
                <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric flex-fill">Indicator</th>
                        <th class="mdl-data-table__cell--non-numeric flex-fill">Enabled in Splunk for</th>
                        <th class="mdl-data-table__cell--non-numeric flex-fill">Available in SevOne for</th>
                    </tr>
                </thead>
                <tbody>`
            console.log(data);
            $.each(data, function (key, val) {
                console.log(val);
                output += `<tr><td class="mdl-data-table__cell--non-numeric">${val.indicatorName}</td>`

                output += `<td class="mdl-data-table__cell--non-numeric">`
                var list = '<ul style="list-style-type:none;">'
                $.each(val.splunkDevices, function (key, device) {
                    list += `<li >
                            ${device}
                            </li>`

                })
                list +=`</ul></td><td class="mdl-data-table__cell--non-numeric"><ul style="list-style-type:none;">`
                $.each(val.sevoneDevices, function (key, device) {
                    list += `<li >
                            ${device}
                            </li>`
                })
                list +='</ul></td>'
                output +=list

                //output += `<td class="mdl-data-table__cell--non-numeric" >${val.sevoneCount}</td></tr>`
            })
            output +='</tbody></table>';
            $('#populate').html(output)
        })
    }
    function manageSplunk(){
        
    }
function getDeviceDetails(type) {
        $.getJSON('/' + type + '/devicedetails', function (data) {
            var output = `<table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" >
                <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric flex-fill">Device</th>
                        <th class="mdl-data-table__cell--non-numeric flex-fill">Avaialable Indicators</th>                        
                    </tr>
                </thead>
                <tbody>`            
            $.each(data, function (key, val) {
                console.log(val);
                output += `<tr><td class="mdl-data-table__cell--non-numeric">${val.deviceName}</td>`
                output += `<td class="mdl-data-table__cell--non-numeric">`
                var list = '<ul style="list-style-type:none;">'
                $.each(val.indicators, function (key, indicator) {
                    list += `<li >
                            ${indicator}
                            </li>`

                })
                list +=`</ul></td>`
                output +=list

                //output += `<td class="mdl-data-table__cell--non-numeric" >${val.sevoneCount}</td></tr>`
            })
            output +='</tbody></table>';
            $('#populate').html(output)
        })
    }   
    /*     
     function getDeviceDetails(type) {
        var output = '';
        console.log("in getdeviceDetails")
        $.getJSON('/' + type + '/devicedetails', function (data) {
            $.each(data, function (key, val) {
                console.log(val);
                output += '<div class="mdl-card mdl-shadow--2dp summary-card" style="margin:10px; width: 100%;height:360px;background-color: ghostwhite;">'
                output += `<a class="summary-link" href="#" onclick="cardClicked('${val.deviceName}'); return false">`
                output += '<div class="mdl-card__title">'
                output += '<h4 class="mdl-card__title-text" style="text-align:center;font-weight:bold;font-size:18px;">' + val.deviceName + '</h4>'
                output += '</div>'
                output += `<div class="mdl-card__supporting-text">
                                <div class="mdl-card__title-text" >Enabled indicators</div>
                            </div>`
                    
                var list = `<div class="mdl-card__title-text" >`
                            //<ul style="list-style-type:none;font-size: 11px;-webkit-columns: 2">`                
                $.each(val.indicators, function (key, indicator) {
                    list += `<div >
                            ${indicator}
                            </div>`

                })
                list +=`</div>`
                output +=list                    
                //output += '<div class="mdl-card__supporting-text">Available in SevOne:' + val.sevoneCount + '</div>'
                output += '</a></div>'
            })
            $('#populate').html(output)
        })

    }       
    */
</script> 
{% endblock %}

{% block content %}
<!--
<div class="mdl-grid" style="max-width: 1080px;">
    <div class="mdl-cell mdl-cell--8-col mdl-textfield mdl-js-textfield" id="search-container">
        <input class="mdl-textfield__input" type="text" id="sample1">
        <label class="mdl-textfield__label" for="sample1">Search...</label>
    </div>
</div>
-->
<div class="mdl-grid" style="max-width: 1080px; margin-top: 50px">
    <style>
        .demo-card-wide.mdl-card {
            width: 512px;
            margin: 10px;
            display: flex;
            justify-content: center;
        }

        .demo-card-wide>.mdl-card__title {
            display: flex;
            justify-content: center;
            color: rgba(0, 0, 0, .54);
            height: 106px;

        }

        .demo-card-wide>.mdl-card__menu {
            display: flex;
            justify-content: center;

            color: rgba(0, 0, 0, .54);
        }

        .mdl-card__supporting-text {
            display: flex;
            font-weight: normal;
            line-height: 1.333;
            color: #3d3e3f;
            font-size:16px;
        }
        .mdl-card__title-text{
            font-size:16px;
        }
        .mdl-card__title {
            color: #3d3e3f;
        }

    </style>

    <div class="demo-card-wide mdl-card mdl-shadow--2dp" style="background-color: ghostwhite;">
        <div class="mdl-card__title">
            <h2 class="mdl_card__supporting-text" style="font-size: 50px;font-weight:bold;">Splunk
            </h2>
        </div>
        <div class="mdl-card__supporting-text" style="display: flex;justify-content: space-between">
            <div class="mdl-card__title-text" style="text-align: center;">Enabled Devices:</div>
            <div class="mdl-card__title-text" style="text-align: center;">{{sp_devices|length}}</div>
        </div>
        <div class="mdl-card__supporting-text" style="display: flex;justify-content: space-between">
            <div class="mdl-card__title-text" >Enabled Indicators:</div>
            <div class="mdl-card__title-text">{{sp_indicators|length}}</div>
        </div>

        <div class="mdl-card__actions mdl-card--border">
            <a class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect"
                id="splunk-details" onclick="getDeviceDetails('splunk');return false;">
                View
            </a>
            <a class="mdl-button mdl-button--raised mdl-button--colored  mdl-js-ripple-effect" id="manage-devices">
                Manage
            </a>

        </div>
    </div>

    <div class="demo-card-wide mdl-card mdl-shadow--2dp" style="background-color: ghostwhite;">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title-text" style="font-size: 50px;font-weight:bold;">SevOne
            </h2>
        </div>
        <div class="mdl-card__supporting-text" style="display: flex;justify-content: space-between">
                <div class="mdl-card__title-text" style="text-align: center;">Available Devices:</div>
                <div class="mdl-card__title-text" style="text-align: center;">{{s1_devices|length}}</div>
            </div>
            <div class="mdl-card__supporting-text" style="display: flex;justify-content: space-between">
                <div class="mdl-card__title-text" >Available Indicators:</div>
                <div class="mdl-card__title-text">{{s1_indicators|length}}</div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
            <a class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" onclick="getDeviceDetails('sevone');return false;"
                id="sevone-details">
                View
            </a>
            <a class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect"
                id="manage-indicators">
                Manage
            </a>

        </div>

    </div>

</div>

<div class="mdl-grid" style="max-width: 1080px; margin-top: 50px;justify-content: center;">
        <div id="populate" style="max-width: 1080px;display:flex;justify-content:space-between;flex-wrap: wrap;">
    
        </div>
    </div>

{% endblock %}